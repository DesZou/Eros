\documentclass{article}
\usepackage{ctex}
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{amsmath}

\title{Solution}
\author{Dez}
\date{\today}

\begin{document}
\maketitle

\section{管道}
首先求出最小生成树，发现要想使权值和最小，每次只会在原树中加入一条边，同时去掉一条边。
去掉的边肯定在新加入边后形成的环中去掉。发现形成环的路径就是新加入边的两个断点到最近公共祖先的路径。
答案只可能在这些边里面，用倍增维护点到祖先的路径中的权值最大值。

\section{棋盘}
动态规划。可以求出最大矩形不超过某值的方案数，那么用差分的思想可以求出最大矩形为某值的方案数。
每一行状态压缩，暴力转移，注意判断转移是否合法。

\section{颜色}
莫队裸题，手动分块$3500$最快？？？
正解树套树（主席树）。
\end{document}